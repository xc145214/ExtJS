<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>grid</title>
    <link rel="stylesheet" href="../share/ext/ext-theme-neptune/build/resources/ext-theme-neptune-all.css">

</head>
<body>


<div id="test"></div>


<script src="../share/ext/ext-all.js"></script>
<script src="../share/ext/ext-theme-neptune/build/ext-theme-neptune.js"></script>
<script src="../share/ext/ext-theme-neptune/build/ext-locale-zh_CN.js"></script>
<script>


    Ext.onReady(function () {

        Ext.define('column.Datamodel.ViewModel', {
            extend: 'Ext.app.ViewModel',
            alias: 'viewmodel.datamodel', // connects to viewModel/type below
            data: {
                "bundleType": '',
                "bundleId": '',
                "groupId": '',
                "datamodelId": '',
                "synchronous": false,
                "indexs": [],
                "description": "",
                "incremental": false,
                "title": "",
                "type": "",
                "removeFake": false,
                "parentId": "",
                "tableName": "",
                "relationships": [],
                "primaryKeys": []
            },
            stores: {
                columns: {
                    model: 'columnsModel',
                    autoLoad: false
                }
            }
        });


        Ext.create('Ext.panel.Panel', {
            title: "sample view model",
            width: 800,
            height: 800,
            viewModel: {
                type: 'datamodel' // references alias "viewmodel.test"
            },
            layout: 'form',
            items: [
                {
                    fieldLable: 'firstName',
                    bind: '{synchronous}'
                },
                {
                    fieldLable: 'firstName',
                    bind: '{removeFake}'
                }
            ],
            renderTo: "test"
        });

        var dataList = {
            "data": {
                "columns": [{
                    "editor": "",
                    "bizType": "",
                    "notNull": false,
                    "defaultValue": "NULL",
                    "validators": "",
                    "precision": 0,
                    "length": 32,
                    "typeTitle": "java.lang.Integer",
                    "title": "",
                    "type": 4,
                    "sequenceName": "",
                    "sequence": false,
                    "name": "file_parent_id",
                    "property": "file_parent_id",
                    "self": true
                }, {
                    "editor": "",
                    "bizType": "",
                    "notNull": true,
                    "defaultValue": "",
                    "validators": "",
                    "precision": 0,
                    "length": 32,
                    "typeTitle": "java.lang.Integer",
                    "title": "",
                    "type": 4,
                    "sequenceName": "",
                    "sequence": false,
                    "name": "file_id",
                    "property": "file_id",
                    "self": true
                }, {
                    "editor": "",
                    "bizType": "",
                    "notNull": false,
                    "defaultValue": "NULL",
                    "validators": "",
                    "precision": 0,
                    "length": 32,
                    "typeTitle": "java.lang.Integer",
                    "title": "",
                    "type": 4,
                    "sequenceName": "",
                    "sequence": false,
                    "name": "file_type",
                    "property": "file_type",
                    "self": true
                }],
                "synchronous": false,
                "indexs": [],
                "description": "",
                "incremental": false,
                "title": "AAA",
                "type": "TABLE",
                "removeFake": false,
                "parentId": "",
                "tableName": "AA",
                "relationships": [],
                "primaryKeys": []
            }
        };

        Ext.define('bundle', {
            extend: 'Ext.data.Model',
            fields: [{
                name: 'name',
                type: 'string'
            }, {
                name: 'self',
                type: 'boolean'
            }, {
                name: 'title',
                type: 'string'
            }, {
                name: 'type',
                type: 'number'
            }]
        });

        var myStore = Ext.create('Ext.data.Store', {
            model: 'bundle',
            proxy: {
                type: 'ajax',
                url: 'listDomainModelNode.jsonx',
                reader: {
                    type: 'json',
                    rootProperty: 'data'
                }
            },
            autoLoad: true
        });


    });


</script>
</body>
</html>