<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>data bind</title>
    <link rel="stylesheet" href="../share/ext/ext-theme-neptune/build/resources/ext-theme-neptune-all.css">
    <link rel="stylesheet" href="../share/css/font-awesome.css">
    <script src="../share/ext/ext-all.js"></script>
    <script src="../share/ext/ext-theme-neptune/build/ext-theme-neptune.js"></script>
    <script src="../share/ext/ext-theme-neptune/build/ext-locale-zh_CN.js"></script>
</head>
<body>
<h1> Formulas</h1>
<div id="target"></div>


<script>

    Ext.onReady(function () {


        // define view model
        Ext.define("View.bind.FormulasModel", {
            extend: "Ext.app.ViewModel",

            alias: "viewmodel.bind-formulas",

            formulas: {
                quad: function (get) {
                    return get('twice') * 2;
                },
                twice: {
                    get: function (get) {
                        return get("x") * 2;
                    }
                }
            }
        });


        //define view
        Ext.define("View.bind.Formulas", {
            extend: "Ext.panel.Panel",
            alias: "widget.bind-formulas",

            title: "view Model Formulas",

            width: 500,
            bodyPadding: 10,


            viewModel: {
                type: "bind-formulas",
                data: {
                    x: 10
                }
            },

            items: [{
                xtype: 'numberfield',
                fieldLabel: 'NUmber',
                bind: '{x}'
            }, {
                xtype: 'displayfield',
                fieldLabel: 'Calculated',
                bind: '{x} * 2 = {twice} / {x} * 4 = {quad}'
            }]
        });


        Ext.create("View.bind.Formulas", {
            renderTo: "target"
        })

    })
</script>
</body>
</html>